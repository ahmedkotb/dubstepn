<% content_for :head do %>
  <%= stylesheet_link_tag    "index" %>
  <%= javascript_include_tag "index" %>
<% end %>

<% content_for :title, "stephan boyer" %>

<% if @tag_name != "home" %>
  <h3 id="tag_filter_heading">Tag filter:&nbsp;&nbsp;<a href="/tag/<%= @tag_name %>"><%= @tag_name %></a></h3>
<% end %>

<% no_posts = true %>
<% for post in @filtered_posts %>
  <% if post.is_public || @logged_in %>
    <%= render :partial => "post", :locals => { :post => post, :comments_mode => :comments_count, :date_mode => :date, :title_link => true } %>
    <% no_posts = false %>
  <% end %>
<% end %>
<% if no_posts %>
  <p id="no_posts">There are no results.</p>
<% end %>

<% if @page > 1 %>
  <% if @tag_name == "home" %>
    <a href="/page/1">First Page</a>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="/page/<%= @page-1 %>">Prev Page</a>&nbsp;&nbsp;&nbsp;&nbsp;
  <% else %>
    <a href="/tag/<%= @tag_name %>/1">First Page</a>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="/tag/<%= @tag_name %>/<%= @page-1 %>">Prev Page</a>&nbsp;&nbsp;&nbsp;&nbsp;
  <% end %>
<% else %>
  <span class="disabled">First Page</span>&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="disabled">Prev Page</span>&nbsp;&nbsp;&nbsp;&nbsp;
<% end %>
<% if @page < @pages %>
  <% if @tag_name == "home" %>
    <a href="/page/<%= @page+1 %>">Next Page</a>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="/page/<%= @pages %>">Last Page</a>
  <% else %>
    <a href="/tag/<%= @tag_name %>/<%= @page+1 %>">Next Page</a>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="/tag/<%= @tag_name %>/<%= @pages %>">Last Page</a>
  <% end %>
<% else %>
  <span class="disabled">Next Page</span>&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="disabled">Last Page</span>
<% end %>